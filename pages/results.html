<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Results</title>
    <style>
      .search-item {
        margin-bottom: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f9f9f9;
      }
    </style>
  </head>
  <body>
    <div id="searchResults"></div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Extract search parameters from URL
        const urlParams = new URLSearchParams(window.location.search);
        const category = urlParams.get("category");
        const item = urlParams.get("item");
        const type = urlParams.get("type");

        // Fetch search results based on parameters
        fetch(`/searchItems?category=${category}&item=${item}&type=${type}`)
          .then((response) => response.json())
          .then((data) => {
            // Display search results
            displaySearchResults(data);
          })
          .catch((error) =>
            console.error("Error fetching search results:", error)
          );
      });

      function displaySearchResults(data) {
        const searchResultsContainer = document.getElementById("searchResults");
        searchResultsContainer.innerHTML = "";

        if (data.length === 0) {
          searchResultsContainer.innerHTML = "<p>No results found.</p>";
          return;
        }

        data.forEach((item) => {
          const itemElement = document.createElement("div");
          itemElement.classList.add("search-item");
          const date = new Date(item.date);

          const day = date.getDate().toString().padStart(2, "0");
          const month = (date.getMonth() + 1).toString().padStart(2, "0");
          const year = date.getFullYear();

          const formattedDate = `${day}-${month}-${year}`;
          itemElement.innerHTML = `
            <p>Name: ${item.name}</p>
            <p>Contact No: ${item.contactNo}</p>
            <p>Email: ${item.userEmail}</p>
            <p>Category: ${item.category}</p>
            <p>Item: ${item.item}</p>
            <p>Date: ${item.formattedDate}</p>
            <p>Description: ${item.description}</p>
            <!-- Add more properties as needed -->
        `;
          searchResultsContainer.appendChild(itemElement);
        });
      }
    </script>
  </body>
</html>
